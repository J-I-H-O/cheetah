# 1. IP(InternetProtocol)란

네트워크 계층에서 데이터를 주고받기위한 핵심 프로토콜 

## 1.1 핵심기능

- IP 주소 지정
    - IP 주소를 바탕으로 송수신지를 지정할 수 있다
- IP 단변화
    - 전송하고자 하는 패킷이 MTU(Maximum Transimission Unit)크기 보다 크다면 패킷을 나누어서 보낼 수 있다.

## 1.2 IP 주소

네트워크 계층에서 데이터 송수신을 위해 사용되는 논리적 주소

네트워크 계층 하위 계층에서 사용하는 MAC주소는 같은 네트워크 즉, LAN 환경만을 위한 기술이였다면, IP는 LAN보다 넓은 WAN환경을 위한 기술이다.

# 2. IP 주소체계

IPv4기준으로 IP 주소는 32비트로 이루어져있고 8비트씩 나누어 표현한다.

IP주소는 네트워크 주소와 호스트 주소로 나뉘어진다

네트워크 주소는 특정 네트워크를 지정하기 위한 주소.

호스트 주소는 해당 네트워크에서 특정 호스트를 지정하기 위한주소

만약 192.168.0.1이라는 IP주소에서, 8비트는 네트워크 주소, 다른 8비트는 호스트주소로 나누어 졌다면 192.168은 네트워크 주소로 0.1은 호스트 주소로 나뉘어질 수 있다.

## 2.1 클래스풀 주소 체계

몇비트가 네트워크 주소인지, 몇비트가 호스트주소이지 구분을 하기위해 클래스로 나누었다.

A클래스부터 E클래스 까지 있으며, A,B,C,D클래스 각각 네트워크주소가 8,16,24,32 비트를 가진다.

각 클래스를 구분하기 위해 네트워크 주소 제일 앞에 일정 비트는 클래스 구분자로 쓰인다.

0→A, 10→B, 110→C 이런식으로 쓰인다.

## 2.2 클래스리스 주소체계

클래스풀 주소체계에서 8비트씩 나누어 네트워크와 호스트 주소를 나누기에는 낭비되는 주소가 너무 많다.

그래서 8비트가 아닌 1비트기준으로 네트워크과 호스트를 나누는 주소체계가 클래스리스 주소체계이다.

여기서 사용되는 중요한 개념이 **서브넷마스크**이다.

# 3. 서브넷마스크

서브넷 마스크란 IP주소상에서 네트워크주소는 1, 호스트주소는 0으로 나타낸 비트열이다.

예를 들면, 네트워크주소가 25비트, 호스트주소가 7비트 일때,

`11111111 11111111 11111111 10000000` 과 같은 서브넷 마스크가 나온다.

해당 서브넷 마스크로 네트워크 주소를 식별할 수 있다. 

하지만, 항상 저렇게 긴 서브넷 마스크를 표현하기에는 불편하기에 다른 표기법이 존재하는데, IP주소 뒤에 네트워크 주소가 몇비트까지인지 표기하는 방식이다

예를 들면, 192.168.0.1/24 와 같이 표기된다. 이 표기법을 CIDR표기법이라 한다.

# 4. 공인IP와 사설IP

## 4.1 공인 IP

전세계에서 고유하게 사용되는 IP들이다.

공인 IP 주소할당 기관 또는 ISP를 통해 할당 받을 수 있다.

## 4.2 사설 IP

사설 IP는 사설 네트워크에서 사용되는 IP이다.

사설 네트워크란 다른 네트워크에 공개되지 않은 네트워크를 뜻한다.

얼마든지 다른 네트워크의 사설IP와 중복되어도 상관없다.

일반적으로 사람들은 따로 IP를 신청해서 할당받아 사용하지 않는데, 그 이유는 LAN내에서 대부분의 호스트는 라우터로 부터 사설IP를 부여받아 사용하기 때문이다.

사설 IP는 외부에 공개되지않기 때문에 외부 네트워크와 데이터를 주고 받기 위해서는 **NAT**라는 기술이 사용된다.

# 5. NAT(Network Address Translation)

NAT는 주로 라우터에서 사용되는 기술로 사설IP를 공인IP로 변환하는 기술이다.

NAT Table을 통해 변환정보를 기록하며 라우팅한다. 

NAT TABLE에는 각 통신마다 출발지 사설IP주소와 목적지 주소를 저장한다. 

해당 목적지에서 응답이오면 출발지사설IP로 응답을 보낸다.

이 때 여러 호스트가 같은 목적지로 데이터를 보내면 응답을 어디로 보내줘야할 지 혼선이 생길 수 있으므로 포트번호도 기록을 한다.
